{% extends 'base.html.twig' %}

{% block content %}
<main class="cours-main">
    <header class="cours-header">
        <h1>Liste des Cours</h1>
    </header>

    <section class="cours-container-filtre">
        <button class="cours-btn-filtre-toggle">
            <img src="/path/to/filter-icon.png" alt="Filtrer" class="cours-icône-filtre">
            Filtrer
        </button>
        
        <div class="cours-dropdown-filtre">
            <form method="get" action="{{ path('app_lister') }}">
                <label for="cours-typeCours">Type de Cours:</label>
                <select name="typeCours" id="cours-typeCours">
                    <option value="">Choisir...</option>
                    {% for typeCours in typeCours %}
                        <option value="{{ typeCours.id }}">{{ typeCours.libelle }}</option>
                    {% endfor %}
                </select><br>
                
                <label for="cours-typeInstrument">Type d'Instrument:</label>
                <select name="typeInstrument" id="cours-typeInstrument">
                    <option value="">Choisir...</option>
                    {% for typeInstrument in typeInstruments %}
                        <option value="{{ typeInstrument.id }}">{{ typeInstrument.libelle }}</option>
                    {% endfor %}
                </select><br>
                
                <button type="submit" class="cours-btn-filtre">Appliquer les filtres</button>
            </form>
        </div>
    </section>

    <section class="cours-container-recherche">
        <form method="GET" action="{{ path('app_lister') }}">
            <input type="text" name="search" id="cours-recherche" placeholder="Rechercher un cours..." class="cours-input-recherche">
            <button type="submit" class="cours-btn-recherche">Rechercher</button>
        </form>
    </section>

    <div class="cours-total">
    <a href="http://172.20.177.77/lilian31/public/cours/ajouter" class="cours-btn-ajouter">Ajouter un Cours</a>
    <section class="cours-container-liste">
        <table class="cours-tableau">
            <thead>
                <tr>
                    <th>Nom du Cours</th>
                    <th>Jour</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for e in pCours %}
                    <tr>
                        <td>
                            <a href="#" class="cours-nom"
                                data-id="{{ e.id }}"
                                data-libelle="{{ e.libelle }}"
                                data-jour="{{ e.jour.libelle }}"
                                data-heureDebut="{{ e.heureDebut|date('H:i') }}"
                                data-heureFin="{{ e.heureFin|date('H:i') }}"
                                data-typeCours="{{ e.typeCours.libelle }}"
                                data-typeInstrument="{{ e.typeInstrument.libelle }}">
                                {{ e.libelle }}
                            </a>
                        </td>
                        <td>{{ e.jour.libelle }}</td>
                        <td>
                            <a href="{{ path('app_coursModifier', {'id': e.id}) }}" class="cours-btn-modifier"><i class="fas fa-edit"></i></a>
                            <a href="javascript:void(0)" class="cours-btn-supprimer" onclick="confirmDelete({{ e.id }})"><i class="fas fa-trash"></i></a>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="4">Aucun cours trouvé.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
    </div>

    <div class="cours-pagination">
        <button class="cours-btn-prev"><i class="fas fa-arrow-left"></i></button>
        <button class="cours-btn-next"><i class="fas fa-arrow-right"></i></button>
    </div>
</main>

<div id="coursModal" class="cours-modal">
    <div class="cours-modal-content">
        <span class="cours-close-btn">&times;</span>
        <h2>Informations du Cours</h2>
        <table class="cours-modal-table">
            <tr><td>Libellé:</td><td id="cours-modal-libelle"></td></tr>
            <tr><td>Jour:</td><td id="cours-modal-jour"></td></tr>
            <tr><td>Heure de début:</td><td id="cours-modal-heureDebut"></td></tr>
            <tr><td>Heure de fin:</td><td id="cours-modal-heureFin"></td></tr>
            <tr><td>Type de Cours:</td><td id="cours-modal-typeCours"></td></tr>
            <tr><td>Type d'Instrument:</td><td id="cours-modal-typeInstrument"></td></tr>
        </table>
    </div>
</div>

<script src="../js/cours-script.js"></script>
{% endblock %}
