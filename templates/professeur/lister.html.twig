<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>

    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="brand">
                <img src="../image/logo.png" alt="ProDeal" class="logo">
            </div>
            <nav class="menu">
                <ul>
                    <li><a href="#" class="active">Accueil</a></li>
                    <li><a href="http://localhost/24lilian31/public/instrument/lister">Instrument</a></li>
                    <li><a href="http://localhost/24lilian31/public/professeur/lister">Professeur</a></li>
                    <li><a href="http://localhost/24lilian31/public/cours/lister">Cours</a></li>
                    <li><a href="http://localhost/24lilian31/public/eleve/lister">Eleve</a></li>
                    <li><a href="http://localhost/24lilian31/public/intervention/lister">Intervention</a></li>
                </ul>
            </nav>
            <div class="organization">
                <ul>
                    <li><a href="#">Déconnexion</a></li>
                </ul>
            </div>
        </aside>

        <main class="main">
            <header class="main-header">
                <h1>Professeur</h1>
                <div class="search">
                    <input type="text" placeholder="Search here..." />
                </div>
            </header>
            <table class="document-table">
                {% for e in pProfesseurs %}
                    <thead>
                        <tr>
                            <td>
                                <a href="#" class="professor-name" 
                                    data-id="{{ e.id }}"
                                    data-nom="{{ e.nom }}"
                                    data-prenom="{{ e.prenom }}"
                                    data-numrue="{{ e.numrue }}"
                                    data-rue="{{ e.rue }}"
                                    data-copos="{{ e.copos }}"
                                    data-ville="{{ e.ville }}"
                                    data-tel="{{ e.tel }}"
                                    data-mail="{{ e.mail }}">
                                    {{ e.nom }}
                                    </a>
                                </a>
                            </td>
                            <td>{{ e.prenom }}</td>
                        </tr>
                    {% else %}
                        <tr>
                            <td>Aucun professeur n'a été trouvé.</td>
                        </tr>
                    {% endfor %}
                    </thead>
            </table>
        </main>
    </div>

    <!-- Modal for displaying professor details -->
    <div id="professorModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>Professeur Details</h2>
            <table>
                <tr><td>Nom : </td><td id="modal-nom"></td></tr>
                <tr><td>Prénom : </td><td id="modal-prenom"></td></tr>
                <tr><td>rue : </td><td id="modal-numrue"></td></tr>
                <tr><td>code postal : </td><td id="modal-copos"></td></tr>
                <tr><td>ville : </td><td id="modal-ville"></td></tr>
                <tr><td>tel : </td><td id="modal-tel"></td></tr>
                <tr><td>mail : </td><td id="modal-mail"></td></tr>
            </table>
        </div>
    </div>

    <script>
        // JavaScript to handle modal popup
            const modal = document.getElementById("professorModal");
            const closeModal = document.querySelector(".close-btn");

            document.querySelectorAll(".professor-name").forEach(link => {
                link.addEventListener("click", function(event) {
                    event.preventDefault();

                    // Fetch all the data attributes from the clicked element
                    const professorId = this.getAttribute("data-id");
                    const professorNom = this.getAttribute("data-nom");
                    const professorPrenom = this.getAttribute("data-prenom");
                    const professorNumRue = this.getAttribute("data-numrue");
                    const professorRue = this.getAttribute("data-rue");
                    const professorCopos = this.getAttribute("data-copos");
                    const professorVille = this.getAttribute("data-ville");
                    const professorTel = this.getAttribute("data-tel");
                    const professorMail = this.getAttribute("data-mail");

                    // Populate the modal with professor's details
                    document.getElementById("modal-nom").innerText = professorNom;
                    document.getElementById("modal-prenom").innerText = professorPrenom;
                    document.getElementById("modal-numrue").innerText = professorNumRue + " " + professorRue;
                    document.getElementById("modal-copos").innerText = professorCopos;
                    document.getElementById("modal-ville").innerText = professorVille;
                    document.getElementById("modal-tel").innerText = professorTel;
                    document.getElementById("modal-mail").innerText = professorMail;

                    // Open the modal
                    modal.style.display = "block";
                });
            });

            closeModal.addEventListener("click", function() {
                modal.style.display = "none";
            });

            // Close modal if clicked outside
            window.onclick = function(event) {
                if (event.target === modal) {
                    modal.style.display = "none";
                }
            };

    </script>
</body>
</html>
